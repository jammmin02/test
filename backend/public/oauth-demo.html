<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tripmate OAuth Demo</title>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    button { padding: 12px 18px; margin: 5px; font-size: 16px; }
    #log { margin-top: 20px; white-space: pre-wrap; font-size: 14px; }
  </style>
</head>
<body>

  <h1>Tripmate Social Login Demo</h1>
  <p>ğŸ‘‡ ì•„ë˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹¤ì œ OAuth ë¡œê·¸ì¸ í™”ë©´ê¹Œì§€ ì´ë™í•©ë‹ˆë‹¤.</p>

  <button onclick="login('google')">Google ë¡œê·¸ì¸</button>
  <button onclick="login('line')">LINE ë¡œê·¸ì¸</button>

  <div id="log"></div>

  <script>
    const API_BASE = "/api/v2";

    function write(msg) {
      document.getElementById("log").innerText += msg + "\n";
    }

    async function login(provider) {
      write(`â¡ï¸ [${provider}] ë¡œê·¸ì¸ ì‹œì‘`);

      const res = await fetch(`${API_BASE}/auth/${provider}/login`, { credentials: "include" });
      const body = await res.json();

      write("ğŸŸ¦ ì„œë²„ ì‘ë‹µ:");
      write(JSON.stringify(body, null, 2));

      if (!body.success) {
        write("âŒ ì—ëŸ¬ ë°œìƒ");
        return;
      }

      const redirectUrl = body.data.redirect_url;
      write(`â¡ï¸ OAuth providerë¡œ ì´ë™: ${redirectUrl}`);

      // ì‹¤ì œë¡œ OAuth í˜ì´ì§€ë¡œ ì´ë™
      window.location.href = redirectUrl;
    }
  </script>

</body>
</html>
